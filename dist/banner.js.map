{"version":3,"file":"banner.js","mappings":"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","sources":["webpack://banner-countdownclock/./src/style.scss","webpack://banner-countdownclock/webpack/bootstrap","webpack://banner-countdownclock/./src/index.js"],"sourcesContent":["export default \"countdown-banner{display:flex;align-items:center;justify-content:center;font-family:var(--font-family, sans-serif)}countdown-banner,countdown-banner::after,countdown-banner::before,countdown-banner *,countdown-banner *::after,countdown-banner *::before{box-sizing:border-box}.clock-display{display:flex;align-items:var(--clock-align, center);justify-content:var(--clock-justify, center);font-size:var(--clock-fontsize, 55px);gap:var(--clock-digit-gap, 0.1em);margin:var(--clock-margin, 0.5em 0 0);color:var(--clock-color, rgb(255, 255, 255))}.clock-display>i{align-self:center;display:block;font-style:normal;font-weight:normal;text-align:center;opacity:.5}.clock-display .digit{display:flex;align-items:baseline;justify-content:center;line-height:1}.clock-display .digit time{position:relative;display:block;align-items:center;flex-direction:column;font-weight:var(--clock-weight, bold);text-align:center;width:var(--digit-width, 2.1ch)}.clock-display .digit time span{position:absolute;bottom:-1em;left:50%;transform:translateX(-50%);font-size:33%;font-weight:normal}\";","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import { zonedTimeToUtc, utcToZonedTime, format, parse } from 'date-fns';\n\nconst globalStyle = require('!!raw-loader!sass-loader!./style.scss').default;\n\nclass CountdownBanner extends HTMLElement {\n\tnow;\n\tendDate;\n\n\tshowDays = true;\n\tshowSeconds = true;\n\tshow2Digits = true;\n\tshowLabels = true;\n\n\tclockEl;\n\tdaysEl;\n\thoursEl;\n\tminutesEl;\n\tsecondsEl;\n\n\tclockInterval;\n\n\ttrueFalse(attr) {\n\t\treturn !!['true', 'yes'].includes(attr.toLowerCase());\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\t\tconst globalStyleEl = document.createElement('style');\n\t\tglobalStyleEl.innerHTML = globalStyle;\n\t\tthis.attachShadow({ mode: 'open' });\n\t\tthis.appendChild(globalStyleEl);\n\t\tthis.shadowRoot.append(globalStyleEl.cloneNode(1));\n\n\t\tif (this.parentElement.nodeName === 'A') {\n\t\t\tthis.parentElement.style.setProperty('display', 'block');\n\t\t\tthis.parentElement.style.setProperty('text-decoration', 'none');\n\t\t}\n\n\t\tconst baseStyle = {\n\t\t\tdisplay: 'flex',\n\t\t\t'background-color':\n\t\t\t\tthis.getAttribute('background-color') || 'transparent',\n\t\t\t'background-size': 'cover',\n\t\t\t'background-repeat': 'no-repeat',\n\t\t\twidth: this.getAttribute('width') || '300px',\n\t\t\theight: this.getAttribute('height') || '250px',\n\t\t\t'--font-family': this.getAttribute('font-family') || 'sans-serif',\n\t\t\t'--clock-fontsize': this.getAttribute('clock-fontsize', '55px'),\n\t\t\t'--clock-align': this.getAttribute('clock-align', 'center'),\n\t\t\t'--clock-justify': this.getAttribute('clock-justify', 'center'),\n\t\t\t'--clock-margin': this.getAttribute('clock-margin') || '.5em 0 0',\n\t\t\t'--clock-color': this.getAttribute('clock-color') || '#fff',\n\t\t\t'--clock-digit-gap':\n\t\t\t\tthis.getAttribute('clock-digit-gap') || '0.1em',\n\t\t};\n\t\tfor (let k in baseStyle) {\n\t\t\tthis.style.setProperty(k, baseStyle[k]);\n\t\t}\n\n\t\tif (this.hasAttribute('load-font')) {\n\t\t\tconst link = document.createElement('link');\n\t\t\tlink.setAttribute('rel', 'stylesheet');\n\t\t\tlink.setAttribute('href', this.getAttribute('load-font'));\n\t\t\tdocument.head.append(link);\n\t\t}\n\n\t\t// Set our background from attributes\n\t\tif (this.hasAttribute('background-image')) {\n\t\t\tthis.style.setProperty(\n\t\t\t\t'background-image',\n\t\t\t\t`url(${this.getAttribute('background-image')})`\n\t\t\t);\n\t\t}\n\n\t\tif (this.hasAttribute('clock-margin')) {\n\t\t\tthis.style.setProperty(\n\t\t\t\t'--clock-margin',\n\t\t\t\tthis.getAttribute('clock-margin')\n\t\t\t);\n\t\t}\n\n\t\t// Generate the clock\n\t\tif (this.hasAttribute('end')) {\n\t\t\tif (this.hasAttribute('clock-show-days')) {\n\t\t\t\tthis.showDays = this.trueFalse(\n\t\t\t\t\tthis.getAttribute('clock-show-days')\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (this.hasAttribute('clock-show-seconds')) {\n\t\t\t\tthis.showSeconds = this.trueFalse(\n\t\t\t\t\tthis.getAttribute('clock-show-seconds')\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (this.hasAttribute('clock-show-2digits')) {\n\t\t\t\tthis.show2Digits = this.trueFalse(\n\t\t\t\t\tthis.getAttribute('clock-show-2digits')\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (this.hasAttribute('clock-show-labels')) {\n\t\t\t\tthis.showLabels = this.trueFalse(\n\t\t\t\t\tthis.getAttribute('clock-show-labels')\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.now = new Date();\n\n\t\t\tthis.endDate = Date.parse(this.getAttribute('end'));\n\t\t\tif (!this.endDate || this.endDate === NaN) {\n\t\t\t\tconsole.error(\n\t\t\t\t\t'Failed to parse end date! Be sure it is in ISO 8601 format!',\n\t\t\t\t\t'https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date#date_time_string_format',\n\t\t\t\t\t'To convert times, try',\n\t\t\t\t\t'https://time.lol/'\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.clockEl = document.createElement('div');\n\t\t\tthis.clockEl.className = `\n\t\t\t\tclock-display\n\t\t\t\t${this.showDays ? 'show-days' : ''}\n\t\t\t\t${this.showSeconds ? 'show-seconds' : ''}\n\t\t\t`;\n\t\t\tthis.daysEl = document.createElement('div');\n\t\t\tthis.daysEl.className = 'digit days';\n\t\t\tthis.hoursEl = document.createElement('div');\n\t\t\tthis.hoursEl.className = 'digit hours';\n\t\t\tthis.minutesEl = document.createElement('div');\n\t\t\tthis.minutesEl.className = 'digit minutes';\n\t\t\tthis.secondsEl = document.createElement('div');\n\t\t\tthis.secondsEl.className = 'digit seconds';\n\n\t\t\tlet separator = document.createElement('i');\n\t\t\tseparator.innerHTML = this.getAttribute('clock-separator') || '';\n\n\t\t\tthis.clockEl.append(\n\t\t\t\tthis.daysEl,\n\t\t\t\tseparator.cloneNode(1),\n\t\t\t\tthis.hoursEl,\n\t\t\t\tseparator.cloneNode(1),\n\t\t\t\tthis.minutesEl,\n\t\t\t\tseparator.cloneNode(1),\n\t\t\t\tthis.secondsEl\n\t\t\t);\n\t\t\tthis.shadowRoot.append(this.clockEl);\n\t\t\tthis.updateClock();\n\t\t\tthis.clockInterval = setInterval(() => this.updateClock(), 1000);\n\t\t}\n\t}\n\n\tupdateClock() {\n\t\tthis.now = new Date();\n\t\tconst _second = 1000;\n\t\tconst _minute = _second * 60;\n\t\tconst _hour = _minute * 60;\n\t\tconst _day = _hour * 24;\n\n\t\tvar distance = this.endDate - this.now;\n\t\tif (distance < 0) {\n\t\t\tclearInterval(this.clockInterval);\n\t\t\tthis.clockInterval = null;\n\t\t\tif (this.hasAttribute('end-message')) {\n\t\t\t\tthis.clockEl.innerHTML = this.getAttribute('end-message');\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tconst timeParts = ['days', 'hours', 'minutes', 'seconds'];\n\t\tconst time = {\n\t\t\tdays: Math.floor(distance / _day),\n\t\t\thours: this.showDays\n\t\t\t\t? Math.floor((distance % _day) / _hour)\n\t\t\t\t: Math.floor(distance / _hour),\n\t\t\tminutes: Math.floor((distance % _hour) / _minute),\n\t\t\tseconds: Math.floor((distance % _minute) / _second),\n\t\t};\n\n\t\ttimeParts.forEach((t) => {\n\t\t\tlet l = t.charAt(0).toUpperCase() + t.substring(1);\n\t\t\tif (time[t] > 1) {\n\t\t\t\tthis[`${t}El`].classList.add('plural');\n\t\t\t} else {\n\t\t\t\tthis[`${t}El`].classList.remove('plural');\n\t\t\t}\n\t\t\tif (this.show2Digits && time[t] < 10) {\n\t\t\t\ttime[t] = `0${time[t]}`;\n\t\t\t}\n\n\t\t\tthis[`${t}El`].innerHTML = `\n\t\t\t\t<time>\n\t\t\t\t\t${time[t]}\n\t\t\t\t\t${this.showLabels ? `<span>${l}</span>` : ''}\n\t\t\t\t</time>\n\t\t\t`;\n\t\t});\n\n\t\tif (!this.showDays) {\n\t\t\tthis.daysEl.style.setProperty('display', 'none');\n\t\t\tthis.daysEl.nextElementSibling.style.setProperty('display', 'none');\n\t\t}\n\t\tif (!this.showSeconds) {\n\t\t\tthis.secondsEl.style.setProperty('display', 'none');\n\t\t\tthis.minutesEl.nextElementSibling.style.setProperty(\n\t\t\t\t'display',\n\t\t\t\t'none'\n\t\t\t);\n\t\t}\n\t}\n}\ncustomElements.define('countdown-banner', CountdownBanner);\n"],"names":["__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","globalStyle","require","CountdownBanner","HTMLElement","now","endDate","showDays","showSeconds","show2Digits","showLabels","clockEl","daysEl","hoursEl","minutesEl","secondsEl","clockInterval","trueFalse","attr","includes","toLowerCase","constructor","super","globalStyleEl","document","createElement","innerHTML","this","attachShadow","mode","appendChild","shadowRoot","append","cloneNode","parentElement","nodeName","style","setProperty","baseStyle","display","getAttribute","width","height","k","hasAttribute","link","setAttribute","head","Date","parse","NaN","console","error","className","separator","updateClock","setInterval","_hour","_minute","_day","distance","clearInterval","time","days","Math","floor","hours","minutes","_second","seconds","forEach","t","l","charAt","toUpperCase","substring","classList","add","remove","nextElementSibling","customElements","define"],"sourceRoot":""}